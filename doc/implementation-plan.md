# 読書管理アプリ 実装計画

## プロジェクト概要

React + Firebase を使用した読書記録管理アプリケーション。2024年の読書記録を管理し、読みたい本の検索機能も提供する。

## 現在実装済みの機能

### 1. 基本構造
- React Router による SPA ナビゲーション
- Firebase Firestore による データ永続化
- レスポンシブデザイン (Bootstrap + 独自CSS)

### 2. 読書記録機能 (`Books.jsx`)
- 本の追加（書名、著者、保管場所、カテゴリ、読了状態、所有状態）
- 本の一覧表示（タイムスタンプ順）
- 読了・所有状態の更新
- 本の削除
- 合計冊数表示（目標40冊に対する進捗）

### 3. 読みたい本検索機能 (`Want.jsx`)
- Google Books API を使用した書籍検索
- 検索結果の表示（書影、タイトル、著者）
- 選択した本の詳細表示

### 4. UI/UX
- ヘッダー、サイドバー、メインコンテンツエリア
- モーダルポップアップによる本の追加
- アイコン使用 (React Icons)

## 追加実装すべき機能

### 高優先度

#### 1. 認証機能の実装
**対象ファイル**: `src/components/Login.jsx` (新規作成)
- Firebaseユーザー認証の追加
- Google認証プロバイダーの実装
- ログイン/ログアウト機能
- プライベートルートの実装

#### 2. 年度選択機能
**対象ファイル**: `src/components/YearSelector.jsx` (新規作成), `Books.jsx`
- 年度別データ管理
- 年度選択UI
- 年度別統計表示
- Firestoreの階層構造変更

#### 3. 編集機能の実装
**対象ファイル**: `Books.jsx`
- 現在「編集機能作成中」となっている編集ボタンの実装
- モーダルでの編集フォーム
- バリデーション強化

#### 4. 読みたい本リストへの保存機能
**対象ファイル**: `Want.jsx`
- 検索した本をウィッシュリストに保存
- 保存した本の一覧表示
- ウィッシュリストから読書記録への移行

### 中優先度

#### 5. データ分析・統計機能
**対象ファイル**: `src/components/Statistics.jsx` (新規作成)
- カテゴリ別読書数のグラフ表示
- 月別読書ペースの可視化
- 読書目標達成率の表示
- Chart.js や Recharts の導入

#### 6. エクスポート機能
**対象ファイル**: `src/utils/export.js` (新規作成)
- CSV形式でのデータエクスポート
- PDFレポート生成
- 読書記録の印刷用フォーマット

#### 7. 検索・フィルタリング機能
**対象ファイル**: `Books.jsx`
- 既存の読書記録内での検索
- カテゴリ・著者・読了状態によるフィルタリング
- ソート機能の追加

#### 8. レスポンシブ対応の改善
**対象ファイル**: 各CSSファイル
- モバイル端末での操作性向上
- タブレット表示の最適化

### 低優先度

#### 9. 読書メモ機能
**対象ファイル**: `Books.jsx`
- 各書籍に対するメモ・感想の記録
- 評価（星評価）機能

#### 10. ダークモード
**対象ファイル**: `src/contexts/ThemeContext.js` (新規作成)
- テーマ切り替え機能
- ユーザー設定の永続化

#### 11. 通知機能
**対象ファイル**: `src/utils/notifications.js` (新規作成)
- 読書目標達成時の通知
- リマインダー機能

## 技術的改善事項

### 1. セキュリティ
- Firebase設定ファイルの環境変数化
- APIキーの適切な管理

### 2. パフォーマンス
- React.memo の活用
- コンポーネントの分割・最適化
- 画像の lazy loading

### 3. コード品質
- TypeScript への移行検討
- ESLint ルールの強化
- テストコードの追加

### 4. エラーハンドリング
- Error Boundary の実装
- より詳細なエラーメッセージ
- オフライン対応

## 実装スケジュール案

### フェーズ1 (1-2週間)
- 認証機能の実装
- 編集機能の完成
- 年度選択機能の基本実装

### フェーズ2 (2-3週間)
- 読みたい本リスト機能
- 統計・分析機能
- 検索・フィルタリング機能

### フェーズ3 (1週間)
- エクスポート機能
- UI/UX改善
- セキュリティ・パフォーマンス改善

## データベース設計変更案

### 現在の構造
```
booklist/
  - bookTitle
  - author
  - bookPlace
  - category
  - isRead
  - isOwned
  - timestamp
```

### 提案する新構造
```
users/{userId}/
  years/{year}/
    books/{bookId}/
      - bookTitle
      - author
      - bookPlace
      - category
      - isRead
      - isOwned
      - timestamp
      - memo (新規)
      - rating (新規)
  
  wishlist/{bookId}/
    - bookTitle
    - author
    - googleBooksId
    - imageUrl
    - description
    - addedDate
```

この構造により、ユーザー別・年度別のデータ管理が可能になります。